<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 3 页 | I&#39;m Sunday</title>
  <meta name="author" content="Sunday">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="I&#39;m Sunday"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="alternate" href="/atom.xml" title="I&#39;m Sunday" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <!-- wumiiVerification -->
  <meta name="wumiiVerification" content="fb50a101-84fe-4ca2-91a7-ae8cf792978b" />
  <meta name="wumiiVerification" content="d73b5866-c390-4156-a4dd-51b526b5335e" />
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!-- Font-Awesome -->
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

</head>

<body>
  <header id="header"><div class= "header-content inner">
	<div class = "alignleft col-one">
		
			<div class='avatar'>
				<img src = "/img/default/avatar.png">
              </div>
		
		<div class="header-div">
		    <h1><a href="/">I&#39;m Sunday</a></h1>
		    <h2><a href="/"></a></h2>
		</div>
	</div>
	<div class = "alignright col-two">
		
	</div>
	<div class="clearfix"></div>
</div>

<div class= "header-nav">
	<div class='header-nav-content inner'>
		<div id="main-nav" class="alignleft">
		    		
		    		  <a href="/"><i class="fa fa-home"></i>首页</a>
		    		
		    		  <a href="/archives"><i class="fa fa-archive"></i>归档</a>
		    		
		    		  <a href="/node"><i class="fa fa-book"></i>Node.js</a>
		    		
		    		  <a href="/hexo"><i class="fa fa-book"></i>电子书</a>
		    		
		</div>
		<div id="sub-nav" class="alignright">
		    
		      <a href="/atom.xml"><i class="fa fa-rss"></i>订阅</a>
		    
		      <a href="/customization"><i class="fa fa-question-circle"></i>留言</a>
		    
		      <a href="/about"><i class="fa fa-user"></i>关于我</a>
		    
		</div>
	</div>
	<div class="clearfix"></div>
</div>
</header>
    <div id="content" class="inner">
      <div id="main-col" class="alignleft"><div id="wrapper">
    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-03-22T13:52:45.000Z"><a href="/2018/03/22/美团踩坑日记/">2018-03-22</a></time>
        
  
    <h1 class="title"><a href="/2018/03/22/美团踩坑日记/">美团踩坑</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#关于编程题"><span class="toc-text"><a href="#&#x5173;&#x4E8E;&#x7F16;&#x7A0B;&#x9898;" class="headerlink" title="&#x5173;&#x4E8E;&#x7F16;&#x7A0B;&#x9898;"></a>&#x5173;&#x4E8E;&#x7F16;&#x7A0B;&#x9898;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String-怎么构建对象？"><span class="toc-text"><a href="#String-&#x600E;&#x4E48;&#x6784;&#x5EFA;&#x5BF9;&#x8C61;&#xFF1F;" class="headerlink" title="String &#x600E;&#x4E48;&#x6784;&#x5EFA;&#x5BF9;&#x8C61;&#xFF1F;"></a>String &#x600E;&#x4E48;&#x6784;&#x5EFA;&#x5BF9;&#x8C61;&#xFF1F;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#“-”和“equal”的区别"><span class="toc-text"><a href="#&#x201C;-&#x201D;&#x548C;&#x201C;equal&#x201D;&#x7684;&#x533A;&#x522B;" class="headerlink" title="&#x201C;==&#x201D;&#x548C;&#x201C;equal&#x201D;&#x7684;&#x533A;&#x522B;"></a>&#x201C;==&#x201D;&#x548C;&#x201C;equal&#x201D;&#x7684;&#x533A;&#x522B;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String的实例方法"><span class="toc-text"><a href="#String&#x7684;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;" class="headerlink" title="String&#x7684;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;"></a>String&#x7684;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-text"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</span></a></li></ol>
    </div>

        <p><strong><em>今天笔试，选择题不想吐槽，都是小学奥数吧，但是自己还是不会，还是要多加练习。</em></strong></p>
<h2 id="关于编程题"><a href="#关于编程题" class="headerlink" title="关于编程题"></a>关于编程题</h2><p>有一道题逻辑真心没有想出来，只对了10%，很惨，但是有道题逻辑是对的，但是踩了String一个坑，下面写一些关于String大坑东西。</p>
<h2 id="String-怎么构建对象？"><a href="#String-怎么构建对象？" class="headerlink" title="String 怎么构建对象？"></a>String 怎么构建对象？</h2><p>这时，我们有两种方法，第一种是直接量赋值</p>
<p>如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String love=<span class="string">"Hello Mandy"</span>;</span><br></pre></td></tr></table></figure></p>
<p>第二种：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String love=<span class="keyword">new</span> String(<span class="string">"Hello Mandy"</span>);</span><br></pre></td></tr></table></figure>
<p>这两种有很大的区别</p>
<p>第一种其实“Hello Mandy”是一个常量值，只String的一个直接量，当第一次使用时，JVM会将该直接量直接存入常量池，在用这种方式创建另外一个相同的常量时，另外一个变量名也是引用该常量，不会再创建一个一模一样的常量。</p>
<p>第二种方法就是简单的在堆内存创建一个对象，该对象有一个“Hello Mandy”的实例变量，可以再创建无数个new String(“Hello Mandy”)，但它们是不同的对象！</p>
<p>其实这两者的区别我还是知道的，踩了String方法的一个坑，String所有的方法都是返回一个String对象，比如substring；本人就是在这踩坑的，而且还有“==”和“equal。</p>
<h2 id="“-”和“equal”的区别"><a href="#“-”和“equal”的区别" class="headerlink" title="“==”和“equal”的区别"></a>“==”和“equal”的区别</h2><ol>
<li>“==”</li>
</ol>
<p>如果两个变量是基本类型，且数值相等，可能不是同一类型，如20和20.0，’A’和65，都返回true；<br>当两个变量不是同一类型时，只有它们它们引用同一个对象时才会返回true；</p>
<ol>
<li>“equal”</li>
</ol>
<p>实际上默认的Object类的equal和==没有区别，但String重写了equal方法：只要两个对象包含的字符串序列相同就返回true。</p>
<h2 id="String的实例方法"><a href="#String的实例方法" class="headerlink" title="String的实例方法"></a>String的实例方法</h2><p>1、求字符串长度<br>public int length()//返回该字符串的长度</p>
<p>2、求字符串某一位置字符<br>public char charAt(int index)//返回字符串中指定位置的字符；注意字符串中第一个字符索引是0，最后一个是length()-1。</p>
<p>3、提取子串<br>用String类的substring方法可以提取字符串中的子串，该方法有两种常用参数:<br>1)public String substring(int beginIndex)//该方法从beginIndex位置起，从当前字符串中取出剩余的字符作为一个新的字符串返回。<br>2)public String substring(int beginIndex, int endIndex)//该方法从beginIndex位置起，从当前字符串中取出到endIndex-1位置的字符作为一个新的字符串返回。</p>
<p>4、字符串比较<br>1)public int compareTo(String anotherString)//该方法是对字符串内容按字典顺序进行大小比较，通过返回的整数值指明当前字符串与参数字符串的大小关系。若当前对象比参数大则返回正整数，反之返回负整数，相等返回0。<br>2)public int compareToIgnore(String anotherString)//与compareTo方法相似，但忽略大小写。<br>3)public boolean equals(Object anotherObject)//比较当前字符串和参数字符串，在两个字符串相等的时候返回true，否则返回false。<br>4)public boolean equalsIgnoreCase(String anotherString)//与equals方法相似，但忽略大小写。</p>
<p>5、字符串连接<br>public String concat(String str)//将参数中的字符串str连接到当前字符串的后面，效果等价于”+”。</p>
<p>6、字符串中单个字符查找<br>1)public int indexOf(int ch/String str)//用于查找当前字符串中字符或子串，返回字符或子串在当前字符串中从左边起首次出现的位置，若没有出现则返回-1。<br>2)public int indexOf(int ch/String str, int fromIndex)//改方法与第一种类似，区别在于该方法从fromIndex位置向后查找。<br>3)public int lastIndexOf(int ch/String str)//该方法与第一种类似，区别在于该方法从字符串的末尾位置向前查找。<br>4)public int lastIndexOf(int ch/String str, int fromIndex)//该方法与第二种方法类似，区别于该方法从fromIndex位置向前查找。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一题的失误源于对String类的了解不够，注意String是不可变类，一旦实例化就不能被更改。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-03-13T10:24:47.000Z"><a href="/2018/03/13/Intent/">2018-03-13</a></time>
        
  
    <h1 class="title"><a href="/2018/03/13/Intent/">Intent</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <p>组件名称|方法名称<br>-<br>|hhh|ooo|</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-03-09T05:46:16.000Z"><a href="/2018/03/09/I miss you/">2018-03-09</a></time>
        
  
    <h1 class="title"><a href="/2018/03/09/I miss you/">I miss you</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#如果思念能像这杯奶茶一样甜美"><span class="toc-text"><a href="#&#x5982;&#x679C;&#x601D;&#x5FF5;&#x80FD;&#x50CF;&#x8FD9;&#x676F;&#x5976;&#x8336;&#x4E00;&#x6837;&#x751C;&#x7F8E;" class="headerlink" title="&#x5982;&#x679C;&#x601D;&#x5FF5;&#x80FD;&#x50CF;&#x8FD9;&#x676F;&#x5976;&#x8336;&#x4E00;&#x6837;&#x751C;&#x7F8E;"></a>&#x5982;&#x679C;&#x601D;&#x5FF5;&#x80FD;&#x50CF;&#x8FD9;&#x676F;&#x5976;&#x8336;&#x4E00;&#x6837;&#x751C;&#x7F8E;</span></a></li></ol>
    </div>

        <h1 id="如果思念能像这杯奶茶一样甜美"><a href="#如果思念能像这杯奶茶一样甜美" class="headerlink" title="如果思念能像这杯奶茶一样甜美"></a>如果思念能像这杯奶茶一样甜美</h1><p><img src="/2018/03/09/I miss you/Imissyou.jpg" alt=""></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-03-07T13:36:38.000Z"><a href="/2018/03/07/java笔试集合1/">2018-03-07</a></time>
        
  
    <h1 class="title"><a href="/2018/03/07/java笔试集合1/">java笔试集合1</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#第一题-彩色砖块"><span class="toc-text"><a href="#&#x7B2C;&#x4E00;&#x9898;-&#x5F69;&#x8272;&#x7816;&#x5757;" class="headerlink" title="&#x7B2C;&#x4E00;&#x9898; &#x5F69;&#x8272;&#x7816;&#x5757;"></a>&#x7B2C;&#x4E00;&#x9898; &#x5F69;&#x8272;&#x7816;&#x5757;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第二题-等差数列"><span class="toc-text"><a href="#&#x7B2C;&#x4E8C;&#x9898;-&#x7B49;&#x5DEE;&#x6570;&#x5217;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x9898; &#x7B49;&#x5DEE;&#x6570;&#x5217;"></a>&#x7B2C;&#x4E8C;&#x9898; &#x7B49;&#x5DEE;&#x6570;&#x5217;</span></a></li></ol>
    </div>

        <blockquote>
<p>为什么要学习Java，目前感兴趣的Android开发语言用Java，虽然用Kotlin的越来越多，还是想先把Java学好，再研究其他的。我不会听别人说，哪个哪个语言好、有前景，就去学哪个，我很喜欢Java，因为Java很规范，很强大，很好用，而且是继枯燥的C/C++之后，学的第三门语言。因为找Android方向的岗位，所以免不了被问Java方面的知识，在网上找了一些题，在这记录下来。</p>
</blockquote>
<h3 id="第一题-彩色砖块"><a href="#第一题-彩色砖块" class="headerlink" title="第一题 彩色砖块"></a>第一题 彩色砖块</h3><p>题目要求：</p>
<p>小易有一些彩色的砖块。每种颜色由一个大写字母表示。各个颜色砖块看起来都完全一样。现在有一个给定的字符串s,s中每个字符代表小易的某个砖块的颜色。小易想把他所有的砖块排成一行。如果最多存在一对不同颜色的相邻砖块,那么这行砖块就很漂亮的。请你帮助小易计算有多少种方式将他所有砖块排成漂亮的一行。(如果两种方式所对应的砖块颜色序列是相同的,那么认为这两种方式是一样的。)<br>例如: s = “ABAB”,那么小易有六种排列的结果:<br>“AABB”,”ABAB”,”ABBA”,”BAAB”,”BABA”,”BBAA”<br>其中只有”AABB”和”BBAA”满足最多只有一对不同颜色的相邻砖块。</p>
<p>输入描述：</p>
<blockquote>
<p>输入包括一个字符串s,字符串s的长度length(1 ≤ length ≤ 50),s中的每一个字符都为一个大写字母(A到Z)。</p>
</blockquote>
<p>输出描述：</p>
<blockquote>
<p>输出一个整数,表示小易可以有多少种方式</p>
</blockquote>
<p>输入例子：</p>
<blockquote>
<p>ABAB</p>
</blockquote>
<p>输出例子：</p>
<blockquote>
<p>2</p>
</blockquote>
<p><strong> 前方高能</strong></p>
<p>我的答案：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span></span>&#123;</span><br><span class="line">	  <span class="keyword">int</span> numofL=<span class="number">1</span>;</span><br><span class="line">	  Scanner input=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">	  String string = input.nextLine();</span><br><span class="line">	  ArrayList&lt;Character&gt; arrayList=<span class="keyword">new</span> ArrayList&lt;Character&gt;();</span><br><span class="line">	  <span class="keyword">char</span> [] array=string.toCharArray();</span><br><span class="line">	  arrayList.add(array[<span class="number">0</span>]);</span><br><span class="line">	  <span class="keyword">int</span> length = string.length();</span><br><span class="line">	  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length-<span class="number">1</span>;i++)&#123;</span><br><span class="line">		   <span class="keyword">if</span>(array[i+<span class="number">1</span>]!=array[i])&#123;</span><br><span class="line">			   <span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line">			   <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;arrayList.size();j++)&#123;</span><br><span class="line">				   <span class="keyword">if</span>(array[i+<span class="number">1</span>]!=arrayList.get(j))&#123;</span><br><span class="line">					  num++;</span><br><span class="line">				   &#125;</span><br><span class="line">				   <span class="keyword">if</span>(num==arrayList.size())</span><br><span class="line">				   &#123;</span><br><span class="line">				   arrayList.add(array[i+<span class="number">1</span>]);</span><br><span class="line">				   numofL++;</span><br><span class="line">				   &#125;</span><br><span class="line">			   &#125;</span><br><span class="line">		   &#125;</span><br><span class="line">	  &#125;</span><br><span class="line">	  <span class="keyword">if</span>(numofL&gt;<span class="number">2</span>)&#123;</span><br><span class="line">		  System.out.println(<span class="number">0</span>);</span><br><span class="line">	  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		  System.out.println(numofL);</span><br><span class="line">	  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然结果是对的，但是道路曲折</p>
<p><strong> 核心思想 </strong><br>找出有几个不一样的字母，有1个就是一种，2个就是两种，2个以上就不存在了。</p>
<p>首先用用一个数组存储找出来的不同的字母，在原字符串中的字母和这个串比较，如果不在里面就加入。<br>这个方法太笨了。</p>
<p>参考答案：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span></span>&#123;</span><br><span class="line">	  <span class="keyword">int</span> numofL=<span class="number">1</span>;</span><br><span class="line">	  Scanner input=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">	  String string = input.nextLine();</span><br><span class="line">	  </span><br><span class="line">	  HashSet&lt;String&gt; hashSet=<span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">	  </span><br><span class="line">	  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;string.length();i++)&#123;</span><br><span class="line">		  hashSet.add(string.substring(i,i+<span class="number">1</span>));</span><br><span class="line">	  &#125;</span><br><span class="line">	  <span class="keyword">if</span>(hashSet.size()&gt;<span class="number">2</span>)&#123;</span><br><span class="line">		  System.out.println(<span class="number">0</span>);</span><br><span class="line">	  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(hashSet.size());</span><br><span class="line">	&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个答案用到了HashSet,因为在HashSet是没有重复元素的，所以将原字符串一个字母一个字母加入HashSet中时，会自动丢弃集合中已经存在的字符。</p>
<p>所以通过这道题，想到了Collection和Map的重要性，他们的子类应用非常广泛，每种子类的特点和独有的方法要记牢。</p>
<h3 id="第二题-等差数列"><a href="#第二题-等差数列" class="headerlink" title="第二题 等差数列"></a>第二题 等差数列</h3><p>问题描述：</p>
<p>如果一个数列S满足对于所有的合法的i,都有S[i + 1] = S[i] + d, 这里的d也可以是负数和零,我们就称数列S为等差数列。<br>小易现在有一个长度为n的数列x,小易想把x变为一个等差数列。小易允许在数列上做交换任意两个位置的数值的操作,并且交换操作允许交换多次。但是有些数列通过交换还是不能变成等差数列,小易需要判别一个数列是否能通过交换操作变成等差数列。</p>
<p>我的答案：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="meta">@SuppressWarnings</span>(<span class="string">"resource"</span>)</span><br><span class="line">		Scanner n=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> num=n.nextInt();</span><br><span class="line">		ArrayList&lt;Integer&gt; arrayList=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;num;i++)&#123;</span><br><span class="line">			<span class="meta">@SuppressWarnings</span>(<span class="string">"resource"</span>)</span><br><span class="line">			Scanner numOfSec=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">			<span class="keyword">int</span> Num=numOfSec.nextInt();</span><br><span class="line">			arrayList.add(Num);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//对ArrayList排序</span></span><br><span class="line">		<span class="comment">//复习冒泡排序</span></span><br><span class="line">		Collections.sort(arrayList);</span><br><span class="line">		<span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>( ;i&lt;arrayList.size()-<span class="number">2</span>;i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>((arrayList.get(i+<span class="number">1</span>)-arrayList.get(i))!=(arrayList.get(i+<span class="number">2</span>)-arrayList.get(i+<span class="number">1</span>)))&#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i==arrayList.size()-<span class="number">2</span>)&#123;</span><br><span class="line">			System.out.println(<span class="string">"Possible"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">"Impossible"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong> 核心思想 </strong></p>
<p>先对数组进行排序，在这里用到了Collections.sort()方法，直接对List进行排序，序列为从小到大，然后在对这个序列进行判断，看是否符合等差数列<br>在此复习一下几种排序算法</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-03-06T07:25:13.000Z"><a href="/2018/03/06/view的绘制过程/">2018-03-06</a></time>
        
  
    <h1 class="title"><a href="/2018/03/06/view的绘制过程/">view的绘制过程</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-继承view，重写onDraw方法"><span class="toc-text"><a href="#1-&#x7EE7;&#x627F;view&#xFF0C;&#x91CD;&#x5199;onDraw&#x65B9;&#x6CD5;" class="headerlink" title="1.&#x7EE7;&#x627F;view&#xFF0C;&#x91CD;&#x5199;onDraw&#x65B9;&#x6CD5;"></a>1.&#x7EE7;&#x627F;view&#xFF0C;&#x91CD;&#x5199;onDraw&#x65B9;&#x6CD5;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-自定义属性"><span class="toc-text"><a href="#2-&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;" class="headerlink" title="2 &#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;"></a>2 &#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-重写onMeasure方法"><span class="toc-text"><a href="#3-&#x91CD;&#x5199;onMeasure&#x65B9;&#x6CD5;" class="headerlink" title="3 &#x91CD;&#x5199;onMeasure&#x65B9;&#x6CD5;"></a>3 &#x91CD;&#x5199;onMeasure&#x65B9;&#x6CD5;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-进阶训练-实现自动换行"><span class="toc-text"><a href="#4-&#x8FDB;&#x9636;&#x8BAD;&#x7EC3;-&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x6362;&#x884C;" class="headerlink" title="4 &#x8FDB;&#x9636;&#x8BAD;&#x7EC3; &#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x6362;&#x884C;"></a>4 &#x8FDB;&#x9636;&#x8BAD;&#x7EC3; &#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x6362;&#x884C;</span></a></li></ol>
    </div>

        <blockquote>
<p>什么某大厂的android面试题集锦，第一题是什么view的绘制流程，菜鸟表示很害怕，根本就不懂，学习学习。在此之前，先搬运一篇自定义TextView的小文章。</p>
</blockquote>
<p><strong>官方对view的介绍</strong></p>
<blockquote>
<p>View这个类代表用户界面组件的基本构建块。View在屏幕上占据一个矩形区域，并负责绘制和事件处理。View是用于创建交互式用户界面组件（按钮、文本等）的基础类。它的子类ViewGroup是所有布局的父类，它是一个可以包含其他view或者viewGroup并定义它们的布局属性的看不见的容器。<br>实现一个自定义View，你通常会覆盖一些framework层在所有view上调用的标准方法。你不需要重写所有这些方法。事实上，你可以只是重写onDraw(android.graphics.Canvas)。</p>
</blockquote>
<p>下面是view的各种类:</p>
<p><img src="/2018/03/06/view的绘制过程/classes.png" alt=""></p>
<p>从上面官方文档介绍我们可以知道，View是所有控件（包括ViewGroup）的父类，它里面有一些常见的方法（上表），如果我们要自定义View，最简单的只需要重写onDraw(android.graphics.Canvas)即可，听起来是不是很简单？那我们就动手自定义一个属于自己的TextView吧。 </p>
<h1 id="1-继承view，重写onDraw方法"><a href="#1-继承view，重写onDraw方法" class="headerlink" title="1.继承view，重写onDraw方法"></a>1.继承view，重写onDraw方法</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.droodsunny.customtextview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by DroodSunny on 2018/3/6.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">customText</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需要绘制的文字</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String mText;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文本的颜色</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTextColor;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文本的大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTextSize;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 绘制时控制文本绘制的范围</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Rect mBound;</span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">customText</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">customText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">customText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        <span class="comment">//初始化</span></span><br><span class="line">        mText = <span class="string">"我家曼曼最可爱"</span>;</span><br><span class="line">        mTextColor = Color.BLACK;</span><br><span class="line">        mTextSize = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mPaint.setTextSize(mTextSize);</span><br><span class="line">        mPaint.setColor(mTextColor);</span><br><span class="line">        <span class="comment">//获得绘制文本的宽和高</span></span><br><span class="line">        mBound = <span class="keyword">new</span> Rect();</span><br><span class="line">        mPaint.getTextBounds(mText, <span class="number">0</span>, mText.length(), mBound);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//API21</span></span><br><span class="line"><span class="comment">//    public MyTextView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123;</span></span><br><span class="line"><span class="comment">//        super(context, attrs, defStyleAttr, defStyleRes);</span></span><br><span class="line"><span class="comment">//        init();</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String text)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mText=text;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextColor</span><span class="params">(<span class="keyword">int</span> color)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mTextColor=color;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextSize</span><span class="params">(<span class="keyword">int</span> size)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mTextSize=size;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//绘制文字</span></span><br><span class="line">        <span class="comment">//getWidth()获得view的宽度</span></span><br><span class="line">        <span class="comment">//mBound.with()获得字体的总宽度</span></span><br><span class="line">        <span class="comment">//从下往上画</span></span><br><span class="line">        Log.d(<span class="string">"textwidth"</span>,<span class="string">""</span>+mBound.width());</span><br><span class="line"></span><br><span class="line">        canvas.drawText(mText, getWidth() / <span class="number">2</span> - mBound.width() / <span class="number">2</span>, getHeight() / <span class="number">2</span> + mBound.height() / <span class="number">2</span>, mPaint);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>drawText的基线是字体的左下角的坐标，而不是左上角。</p>
<p>运行结果：</p>
<p><img src="/2018/03/06/view的绘制过程/result.png" alt=""></p>
<p>当然这样写存在问题，因为这样写在xml中无法指定TextView的属性<br>所以我们要自定义属性</p>
<h1 id="2-自定义属性"><a href="#2-自定义属性" class="headerlink" title="2 自定义属性"></a>2 自定义属性</h1><p>在values文件夹下新建类型为values的attrs.xml文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;resources&gt;</span><br><span class="line">&lt;attr name=<span class="string">"mText"</span> format=<span class="string">"string"</span>/&gt;</span><br><span class="line">&lt;attr name=<span class="string">"mTextColor"</span> format=<span class="string">"color"</span>/&gt;</span><br><span class="line">&lt;attr name=<span class="string">"mTextSize"</span> format=<span class="string">"dimension"</span>/&gt;</span><br><span class="line">&lt;declare-styleable name=<span class="string">"customText"</span>&gt;</span><br><span class="line">    &lt;attr name=<span class="string">"mText"</span>/&gt;</span><br><span class="line">    &lt;attr name=<span class="string">"mTextColor"</span>/&gt;</span><br><span class="line">    &lt;attr name=<span class="string">"mTextSize"</span>/&gt;</span><br><span class="line">&lt;/declare-styleable&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后在layout资源文件里加入我们自定义的属性</p>
<p><strong>必须引入我们的命名空间</strong> ：xmlns:app=”<a href="http://schemas.android.com/apk/res-auto" target="_blank" rel="noopener">http://schemas.android.com/apk/res-auto</a>“<br>不过在Androidstudio3.0中新建layout资源文件时一般都会自动引入这句话。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:app=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    tools:context=<span class="string">"com.example.droodsunny.customtextview.MainActivity"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.example.droodsunny.customtextview.customText</span><br><span class="line">        android:id=<span class="string">"@+id/mText"</span></span><br><span class="line">        app:mText=<span class="string">"思念会有声音"</span></span><br><span class="line">        android:layout_width=<span class="string">"200dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"200dp"</span></span><br><span class="line">        android:background=<span class="string">"#ff0000"</span></span><br><span class="line">         /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>我们在资源文件中定义的属性必须要view得到，所以在view的构造方法中得到属性的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取自定义属性的值</span></span><br><span class="line"></span><br><span class="line">       TypedArray array=context.getTheme().obtainStyledAttributes(attrs,R.styleable.customText,defStyleAttr,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">       mText = array.getString(R.styleable.customText_mText);</span><br><span class="line">       mTextColor=array.getColor(R.styleable.customText_mTextColor, Color.BLACK);</span><br><span class="line">       mTextSize=array.getDimension(R.styleable.customText_mTextSize,<span class="number">100</span>);</span><br><span class="line">       <span class="comment">//注意回收</span></span><br><span class="line">       array.recycle();</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><img src="/2018/03/06/view的绘制过程/result1.png" alt=""></p>
<p>这样写还是存在问题，如果我们这样设置属性：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:layout_width="wrap_content"</span><br><span class="line">android:layout_height="wrap_content"</span><br></pre></td></tr></table></figure></p>
<p>会出现这样的结果：<br><img src="/2018/03/06/view的绘制过程/result2.png" alt=""><br>这显然不是我们想要的，这是我们没有重写onMeasure()方法</p>
<h1 id="3-重写onMeasure方法"><a href="#3-重写onMeasure方法" class="headerlink" title="3 重写onMeasure方法"></a>3 重写onMeasure方法</h1><ol>
<li>MeasureSpec</li>
</ol>
<p>在学习onMasure方法之前，我们要先了解他的参数中的一个类MeasureSpec，知己知彼才能百战百胜 。<br>跟踪一下源码，发现它是View中的一个静态内部类，是由尺寸和模式组合而成的一个值，用来描述父控件对子控件尺寸的约束，看看他的部分源码，一共有三种模式，然后提供了合成和分解的方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * measurespec封装了父控件对他的孩子的布局要求。</span></span><br><span class="line"><span class="comment"> * 一个measurespec由大小和模式。有三种可能的模式：</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MeasureSpec</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MODE_SHIFT = <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MODE_MASK  = <span class="number">0x3</span> &lt;&lt; MODE_SHIFT;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//父控件不强加任何约束给子控件，它可以是它想要任何大小。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNSPECIFIED = <span class="number">0</span> &lt;&lt; MODE_SHIFT;  <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//父控件决定给孩子一个精确的尺寸</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> EXACTLY     = <span class="number">1</span> &lt;&lt; MODE_SHIFT;  <span class="comment">//1073741824</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//父控件会给子控件尽可能大的尺寸</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> AT_MOST     = <span class="number">2</span> &lt;&lt; MODE_SHIFT;   <span class="comment">//-2147483648</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据给定的尺寸和模式创建一个约束规范</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">makeMeasureSpec</span><span class="params">(<span class="keyword">int</span> size, <span class="keyword">int</span> mode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sUseZeroUnspecifiedMeasureSpec &amp;&amp; mode == UNSPECIFIED) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> makeMeasureSpec(size, mode);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从约束规范中获取模式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMode</span><span class="params">(<span class="keyword">int</span> measureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (measureSpec &amp; MODE_MASK);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从约束规范中获取尺寸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">(<span class="keyword">int</span> measureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (measureSpec &amp; ~MODE_MASK);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li>分析为什么我们自定义的MyTextView设置了wrap_content却填充屏幕</li>
</ol>
<p>上面三种约束模式与布局参数的对应关系见下图<br><img src="/2018/03/06/view的绘制过程/onMeasure.pag" alt=""></p>
<p>下面我们来看一下onMeasure的源码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">    setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),</span><br><span class="line">            getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getDefaultSize</span><span class="params">(<span class="keyword">int</span> size, <span class="keyword">int</span> measureSpec)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result = size;</span><br><span class="line">    <span class="keyword">int</span> specMode = MeasureSpec.getMode(measureSpec);</span><br><span class="line">    <span class="keyword">int</span> specSize = MeasureSpec.getSize(measureSpec);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (specMode) &#123;</span><br><span class="line">    <span class="keyword">case</span> MeasureSpec.UNSPECIFIED:</span><br><span class="line">        result = size;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> MeasureSpec.AT_MOST:</span><br><span class="line">    <span class="keyword">case</span> MeasureSpec.EXACTLY:</span><br><span class="line">        result = specSize;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>onMeasure方法调用了setMeasuredDimension(int measuredWidth, int measuredHeight)方法，而传入的参数已经是测量过的默认宽和高的值了；我们看看getDefaultSize 方法是怎么计算测量宽高的。根据父控件给予的约束，发现AT_MOST （相当于wrap_content ）和EXACTLY （相当于match_parent ）两种情况返回的测量宽高都是specSize，而这个specSize正是我们上面说的父控件剩余的宽高，所以默认onMeasure方法中wrap_content 和match_parent 的效果是一样的，都是填充剩余的空间。</p>
<ol>
<li>重写onMeasure方法</li>
</ol>
<p>我们先忽略掉UNSPECIFIED 的情况（使用极少），只考虑AT_MOST 和EXACTLY ，现在的问题是设置wrap_content 时，控件却使用了match_parent 的效果，看下面怎么重写onMeasure（注释比较详细，不做过多讲解）： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        <span class="keyword">int</span> widthMode=MeasureSpec.getMode(widthMeasureSpec);<span class="comment">//获取宽的模式</span></span><br><span class="line">        <span class="keyword">int</span> heightMode=MeasureSpec.getMode(heightMeasureSpec);<span class="comment">//获取高的模式</span></span><br><span class="line">        <span class="keyword">int</span> widthSize=MeasureSpec.getSize(widthMeasureSpec);<span class="comment">//获取宽的尺寸</span></span><br><span class="line">        <span class="keyword">int</span> heightSize=MeasureSpec.getSize(heightMeasureSpec);<span class="comment">//获取高的尺寸</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> width;</span><br><span class="line">        <span class="keyword">int</span> height;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//处理view的宽</span></span><br><span class="line">        <span class="comment">//如果属性是match_parent或者是具体的值，则直接赋值</span></span><br><span class="line">        <span class="keyword">if</span>(widthMode==MeasureSpec.EXACTLY)&#123;</span><br><span class="line">            width=widthSize;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//得到控件需要多大的尺寸</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取字体的宽度</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> textWidth=mBound.width();</span><br><span class="line">            <span class="comment">//控件的宽度就是文本的宽度加上两边的内边距。内边距就是padding值，在构造方法执行完就被赋值</span></span><br><span class="line">            width=(<span class="keyword">int</span>)(textWidth+getPaddingLeft()+getPaddingRight());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//处理view的高度</span></span><br><span class="line">        <span class="keyword">if</span>(heightMode==MeasureSpec.EXACTLY)&#123;</span><br><span class="line">            height=heightSize;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//得到控件需要多大的尺寸</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取字体的高度</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> textHeight=mBound.height();</span><br><span class="line">            <span class="comment">//控件的宽度就是文本的宽度加上两边的内边距。内边距就是padding值，在构造方法执行完就被赋值</span></span><br><span class="line">            height=(<span class="keyword">int</span>)(textHeight+getPaddingTop()+getPaddingBottom());</span><br><span class="line">        &#125;</span><br><span class="line">        setMeasuredDimension(width,height);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>给加上padding属性<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.example.droodsunny.customtextview.customText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/mText"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mText</span>=<span class="string">"思念会有声音"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"#ff0000"</span></span></span><br><span class="line"><span class="tag">         /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>运行结果如下<br><img src="/2018/03/06/view的绘制过程/result3.png" alt=""></p>
<h1 id="4-进阶训练-实现自动换行"><a href="#4-进阶训练-实现自动换行" class="headerlink" title="4 进阶训练 实现自动换行"></a>4 进阶训练 实现自动换行</h1><p>只需要在测量的时候，根据文字的总长度和控件的宽度，就可以知道需要绘制几行，然后将文本分割成小段放入集合中，在onDraw方法中分别绘制；<br>需要注意的是，onMeasure方法不只调用一次，所以在分段文本是需要判断，不要重复分段，否则会报错。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.droodsunny.customtextview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by DroodSunny on 2018/3/6.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">customText</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需要绘制的文字</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;String&gt; textList;</span><br><span class="line">    <span class="keyword">private</span> String mText;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文本的颜色</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTextColor;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文本的大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mTextSize;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 绘制时控制文本绘制的范围</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Rect mBound;</span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">customText</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">customText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">customText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line"></span><br><span class="line">        textList=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取自定义属性的值</span></span><br><span class="line"></span><br><span class="line">        TypedArray array=context.getTheme().obtainStyledAttributes(attrs,R.styleable.customText,defStyleAttr,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        mText = array.getString(R.styleable.customText_mText);</span><br><span class="line">        mTextColor=array.getColor(R.styleable.customText_mTextColor, Color.BLACK);</span><br><span class="line">        mTextSize=array.getDimension(R.styleable.customText_mTextSize,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//注意回收</span></span><br><span class="line">        array.recycle();</span><br><span class="line">        <span class="comment">//初始化画笔</span></span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mPaint.setTextSize(mTextSize);</span><br><span class="line">        mPaint.setColor(mTextColor);</span><br><span class="line">        <span class="comment">//获得绘制文本的宽和高</span></span><br><span class="line">        mBound = <span class="keyword">new</span> Rect();</span><br><span class="line">        mPaint.getTextBounds(mText, <span class="number">0</span>, mText.length(), mBound);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//API21</span></span><br><span class="line"><span class="comment">//    public MyTextView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123;</span></span><br><span class="line"><span class="comment">//        super(context, attrs, defStyleAttr, defStyleRes);</span></span><br><span class="line"><span class="comment">//        init();</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String text)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mText=text;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextColor</span><span class="params">(<span class="keyword">int</span> color)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mTextColor=color;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextSize</span><span class="params">(<span class="keyword">int</span> size)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mTextSize=size;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTextSize</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mTextSize;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//绘制文字</span></span><br><span class="line">        <span class="comment">//getWidth()获得view的宽度</span></span><br><span class="line">        <span class="comment">//mBound.with()获得字体的总宽度</span></span><br><span class="line">        <span class="comment">//从下往上画</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//绘制多行</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;textList.size();i++)&#123;</span><br><span class="line">            canvas.drawText(textList.get(i), getPaddingStart(), (getPaddingTop()+mBound.height())*(i+<span class="number">1</span>), mPaint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">boolean</span> isOneLines = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">int</span> spLineNum;<span class="comment">//最大行数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">float</span> fontScale=getResources().getDisplayMetrics().scaledDensity;</span><br><span class="line">        <span class="keyword">int</span> widthMode=MeasureSpec.getMode(widthMeasureSpec);<span class="comment">//获取宽的模式</span></span><br><span class="line">        <span class="keyword">int</span> heightMode=MeasureSpec.getMode(heightMeasureSpec);<span class="comment">//获取高的模式</span></span><br><span class="line">        <span class="keyword">int</span> widthSize=MeasureSpec.getSize(widthMeasureSpec);<span class="comment">//获取宽的尺寸</span></span><br><span class="line">        <span class="keyword">int</span> heightSize=MeasureSpec.getSize(heightMeasureSpec);<span class="comment">//获取高的尺寸</span></span><br><span class="line">        Log.d(<span class="string">"widthSize"</span>,widthSize+<span class="string">""</span>);</span><br><span class="line">        <span class="comment">//获取字体的宽度</span></span><br><span class="line">        <span class="keyword">float</span> textWidth=mBound.width();</span><br><span class="line">        <span class="comment">//mText的长度，即字符串的长度</span></span><br><span class="line">        <span class="comment">//判断是否已经对文本分过段</span></span><br><span class="line">        <span class="keyword">if</span>(textList.size()==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> padding=getPaddingLeft()+getPaddingRight();<span class="comment">//内边距宽度</span></span><br><span class="line">            <span class="keyword">int</span> specWidth=widthSize-padding;<span class="comment">//能够显示文本的最大宽度</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(textWidth&lt;specWidth)&#123;</span><br><span class="line">                spLineNum=<span class="number">1</span>;</span><br><span class="line">                textList.add(mText);</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                isOneLines=<span class="keyword">false</span>;</span><br><span class="line">               <span class="comment">/* spLineNum=((int)(textWidth/specWidth))+1;*/</span></span><br><span class="line">               spLineNum= (<span class="keyword">int</span>) (textWidth/specWidth)+<span class="number">1</span>;</span><br><span class="line">                Log.d(<span class="string">"lineStr"</span>,mTextSize/fontScale+<span class="number">0.5f</span>+<span class="string">""</span>);</span><br><span class="line">                Log.d(<span class="string">"lineStr"</span>,specWidth+<span class="string">""</span>);</span><br><span class="line">                Log.d(<span class="string">"lineStr"</span>,spLineNum+<span class="string">""</span>);</span><br><span class="line">                <span class="comment">//每一行字符串的长度</span></span><br><span class="line">                <span class="keyword">int</span> lineLength= (<span class="keyword">int</span>) (specWidth/mTextSize);</span><br><span class="line">                String lineStr;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;spLineNum;i++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(mText.length()&lt;lineLength)&#123;</span><br><span class="line">                        lineStr=mText.substring(<span class="number">0</span>,mText.length());</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>((mText.length()-i*lineLength)&lt;lineLength)&#123;</span><br><span class="line">                        lineStr=mText.substring(i*lineLength,mText.length());</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        lineStr=mText.substring(i*lineLength,(i+<span class="number">1</span>)*lineLength);</span><br><span class="line">                    &#125;</span><br><span class="line">                    textList.add(lineStr);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> width;</span><br><span class="line">        <span class="keyword">int</span> height;</span><br><span class="line">        <span class="comment">//处理view的宽</span></span><br><span class="line">        <span class="comment">//如果属性是match_parent或者是具体的值，则直接赋值</span></span><br><span class="line">        <span class="keyword">if</span>(widthMode==MeasureSpec.EXACTLY)&#123;</span><br><span class="line">            width=widthSize;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//控件的宽度就是文本的宽度加上两边的内边距。内边距就是padding值，在构造方法执行完就被赋值</span></span><br><span class="line">            width=(<span class="keyword">int</span>)(textWidth+getPaddingLeft()+getPaddingRight());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//处理view的高度</span></span><br><span class="line">        <span class="keyword">if</span>(heightMode==MeasureSpec.EXACTLY)&#123;</span><br><span class="line">            height=heightSize;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//获取字体的高度</span></span><br><span class="line">            <span class="keyword">float</span> textHeight=mBound.height();</span><br><span class="line">            <span class="comment">//如果是一行</span></span><br><span class="line">            <span class="keyword">if</span>(isOneLines) &#123;</span><br><span class="line">                <span class="comment">//控件的宽度就是文本的宽度加上两边的内边距。内边距就是padding值，在构造方法执行完就被赋值</span></span><br><span class="line">                height = (<span class="keyword">int</span>) (textHeight + getPaddingTop() + getPaddingBottom());</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                height=(<span class="keyword">int</span>)(spLineNum*textHeight+getPaddingTop()*spLineNum+getPaddingBottom());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        setMeasuredDimension(width,height);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="/2018/03/06/view的绘制过程/result4.png" alt=""></p>
<p>到此为止，我们已经了解到自定义控件的基本步骤： </p>
<ol>
<li>继承View，重写构造方法 </li>
<li>自定义属性，在构造方法中初始化属性 </li>
<li>重写onMeasure方法测量宽高 </li>
<li>重写onDraw方法绘制控件</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-03-06T07:15:38.000Z"><a href="/2018/03/06/竖向字体/">2018-03-06</a></time>
        
  
    <h1 class="title"><a href="/2018/03/06/竖向字体/">竖向字体</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <blockquote>
<p>前一阵子写了一个小APP，因为不满足于横向的字体，所以在网上找了个竖向字体的demo，在此搬运一下，希望自己能看懂。</p>
</blockquote>
<p><a href="https://github.com/LuffyBySunny/NoteBook/tree/master/app/src/main/java/com/example/droodsunny/memorybook/Util" target="_blank" rel="noopener">链接在此</a></p>
<p><strong>下面来慢慢解析一下</strong></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2017-12-25T16:00:00.000Z"><a href="/2017/12/26/2017-12-26-result of A&F/">2017-12-26</a></time>
        
  
    <h1 class="title"><a href="/2017/12/26/2017-12-26-result of A&F/">return results of activity and fragment</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Activity"><span class="toc-text"><a href="#Activity" class="headerlink" title="Activity"></a>Activity</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#父Activity"><span class="toc-text"><a href="#&#x7236;Activity" class="headerlink" title="&#x7236;Activity"></a>&#x7236;Activity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子Activity"><span class="toc-text"><a href="#&#x5B50;Activity" class="headerlink" title="&#x5B50;Activity"></a>&#x5B50;Activity</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fragment"><span class="toc-text"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#第一个Fragment"><span class="toc-text"><a href="#&#x7B2C;&#x4E00;&#x4E2A;Fragment" class="headerlink" title="&#x7B2C;&#x4E00;&#x4E2A;Fragment"></a>&#x7B2C;&#x4E00;&#x4E2A;Fragment</span></a></li></ol></li></ol>
    </div>

        <p>Activity和Fragment有很多相似之处，有时候我们对他们的要求也很相似，对Activity进行操作时，在返回上一级时我们很可能会要球得到子Activity的操作结果，在对Fragment操作时，从一个Fragment回到另一个Fragment时，我们也希望拿到一些数据。</p>
<h2 id="Activity"><a href="#Activity" class="headerlink" title="Activity"></a>Activity</h2><h3 id="父Activity"><a href="#父Activity" class="headerlink" title="父Activity"></a>父Activity</h3><p>其核心是在父Activity中调用startActivityForResult(Intent intent,int requestCode)</p>
<ol>
<li>Intent intent:意图而已，没什么特别之处<br>requestCode请求码:用于标识是哪个Activity返回的数据<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> requestCode=<span class="number">10</span>;</span><br><span class="line"> Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, targetActivity.class);  </span><br><span class="line">        <span class="comment">//用这个api启动的Activity，在销毁时，系统会回调onActivityResult  </span></span><br><span class="line">        startActivityForResult(intent, requestCode);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>然后再重写 onActivityResult(int requestCode, int resultCode, Intent data)方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p> 该方法有三个参数：</p>
<ol>
<li><p>int requestCode： 是在该Activity中定义的且传到目标Activity的标识码，在从某个activity返回时，<br>通过判断语句：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(requestCode == <span class="number">10</span>)&#123;  </span><br><span class="line">   <span class="keyword">if</span>(resultCode=RESULT_OK)</span><br><span class="line">     &#123;</span><br><span class="line">           <span class="comment">//在这进行需要的操作</span></span><br><span class="line">     &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>int resultCode 在子Activity中再介绍。</p>
</li>
</ol>
<h3 id="子Activity"><a href="#子Activity" class="headerlink" title="子Activity"></a>子Activity</h3><p>核心是**setResult（）方法,向上一个活动返回数据<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">int</span> resultCode,Intent intent);</span><br><span class="line">    <span class="comment">//把返回数据存入Intent</span></span><br><span class="line">  intent.putExtra(<span class="string">"result"</span>, <span class="string">"My name is linjiqin"</span>);</span><br><span class="line">  <span class="comment">//设置返回数据</span></span><br><span class="line">  setResult(RESULT_OK, intent);</span><br></pre></td></tr></table></figure></p>
<p>其中有两个参数</p>
<ol>
<li>resultCode: 向上一个活动返回处理结果，一般只有RESULT_OK和RESULT_CANCLE</li>
<li>将带有数据的Intent返回过去</li>
</ol>
<h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><p>Fragment之间的数据传递比Activity之间的稍微麻烦一点，关于Fragment之间的数据传递可以查看另一篇文章<a href="http://sshpro.space/2017/12/13/2017-12-13-argument%20of%20fragment/" target="_blank" rel="noopener">Fragment数据传递</a>。<br>我今天要说的是怎么返回数据</p>
<h3 id="第一个Fragment"><a href="#第一个Fragment" class="headerlink" title="第一个Fragment"></a>第一个Fragment</h3>
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2017-12-19T16:00:00.000Z"><a href="/2017/12/20/两种图的遍历算法/">2017-12-20</a></time>
        
  
    <h1 class="title"><a href="/2017/12/20/两种图的遍历算法/">图的两种遍历算法</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <p>明天是英语课的模拟面试，今天看了一下题，发现有一题说，讲一下图的两种遍历方式，勾起了学习数据结构那段日子的回忆。<br><br><img src="/2017/12/20/两种图的遍历算法/tree.jpg" alt=""></p>
<p><strong>深度优先遍历</strong></p>
<p>很容易想到深度优先遍历是一种递归思想，即从图的顶点出发，向某个放下依次遍历顶点，直到该顶点没有左孩子（右孩子），然后再以该节点的右孩子（左孩子）为顶点，即对每个顶点都进行深度优先遍历。<br><br>所以顺序应该为0-&gt;1-&gt;3-&gt;7-&gt;4-&gt;2-&gt;5-&gt;6</p>
<p><strong>广度优先遍历</strong></p>
<p>广度优先遍历即一层一层地遍历，从顶点开始,将与该顶点相邻的结点全部访问后再访问下一层。<br><br>顺序为 0-&gt;1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6-&gt;7</p>
<p>代码实现<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 100</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> edges[MAX][MAX];    <span class="comment">//邻接矩阵</span></span><br><span class="line">    <span class="keyword">int</span> n;                  <span class="comment">//顶点数</span></span><br><span class="line">    <span class="keyword">int</span> e;                  <span class="comment">//边数</span></span><br><span class="line">&#125;MGraph;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> visited[MAX];          <span class="comment">//标记顶点是否被访问过</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">creatMGraph</span><span class="params">(MGraph &amp;G)</span>    <span class="comment">//用引用作参数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="keyword">int</span> s,t;                 <span class="comment">//存储顶点编号</span></span><br><span class="line">    <span class="keyword">int</span> v;                   <span class="comment">//存储边的权值</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;G.n;i++)       <span class="comment">//初始化</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;G.n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            G.edges[i][j]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        visited[i]=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;G.e;i++)      <span class="comment">//对矩阵相邻的边赋权值</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;s,&amp;t,&amp;v);   <span class="comment">//输入边的顶点编号以及权值</span></span><br><span class="line">        G.edges[s][t]=v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(MGraph G,<span class="keyword">int</span> v)</span>      <span class="comment">//深度优先搜索</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>,v);          <span class="comment">//访问结点v</span></span><br><span class="line">    visited[v]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;G.n;i++)       <span class="comment">//访问与v相邻的未被访问过的结点</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(G.edges[v][i]!=<span class="number">0</span>&amp;&amp;visited[i]==<span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            DFS(G,i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS1</span><span class="params">(MGraph G,<span class="keyword">int</span> v)</span>   <span class="comment">//非递归实现</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>,v);        <span class="comment">//访问初始结点</span></span><br><span class="line">    visited[v]=<span class="literal">true</span>;</span><br><span class="line">    s.push(v);              <span class="comment">//入栈</span></span><br><span class="line">    <span class="keyword">while</span>(!s.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> i,j;</span><br><span class="line">        i=s.top();          <span class="comment">//取栈顶顶点</span></span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;G.n;j++)  <span class="comment">//访问与顶点i相邻的顶点</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(G.edges[i][j]!=<span class="number">0</span>&amp;&amp;visited[j]==<span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>,j);     <span class="comment">//访问</span></span><br><span class="line">                visited[j]=<span class="literal">true</span>;</span><br><span class="line">                s.push(j);           <span class="comment">//访问完后入栈</span></span><br><span class="line">                <span class="keyword">break</span>;               <span class="comment">//找到一个相邻未访问的顶点，访问之后则跳出循环</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(j==G.n)                   <span class="comment">//如果与i相邻的顶点都被访问过，则将顶点i出栈</span></span><br><span class="line">            s.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BFS</span><span class="params">(MGraph G,<span class="keyword">int</span> v)</span>      <span class="comment">//广度优先搜索</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;             <span class="comment">//STL模板中的queue</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>,v);</span><br><span class="line">    visited[v]=<span class="literal">true</span>;</span><br><span class="line">    Q.push(v);</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> i,j;</span><br><span class="line">        i=Q.front();         <span class="comment">//取队首顶点</span></span><br><span class="line">        Q.pop();</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;G.n;j++)   <span class="comment">//广度遍历</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(G.edges[i][j]!=<span class="number">0</span>&amp;&amp;visited[j]==<span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>,j);</span><br><span class="line">                visited[j]=<span class="literal">true</span>;</span><br><span class="line">                Q.push(j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,e;    <span class="comment">//建立的图的顶点数和边数</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;e)==<span class="number">2</span>&amp;&amp;n&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        MGraph G;</span><br><span class="line">        G.n=n;</span><br><span class="line">        G.e=e;</span><br><span class="line">        creatMGraph(G);</span><br><span class="line">        DFS(G,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="comment">//    DFS1(G,0);</span></span><br><span class="line">    <span class="comment">//    printf("\n");</span></span><br><span class="line">    <span class="comment">//    BFS(G,0);</span></span><br><span class="line">    <span class="comment">//    printf("\n");</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2017-12-12T16:00:00.000Z"><a href="/2017/12/13/2017-12-13-argument of fragment/">2017-12-13</a></time>
        
  
    <h1 class="title"><a href="/2017/12/13/2017-12-13-argument of fragment/">Android fragement 数据传递（argument)</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <p>在我们平常开发中经常会用到Fragment，当我们使用Fragment时一般是通过new Fragment的构造方法来实现，如果我问你怎么向一个Fragment传递参数，你是不是会首先想到通过构造方法。但事实证明这种方法是不可行的。<br></p>
<p></p><p>&nbsp;</p>
<p>首先我们看构造方法这种方式为什么不行，根据Android文档说明，当一个fragment重新创建的时候，系统会再次调用 Fragment中的默认构造函数。 注意这里：是 默认构造函数。<br>这句话更直白的意思就是：当你小心翼翼的创建了一个带有重要参数的Fragment的之后，一旦由于什么原因（横竖屏切换）导致你的Fragment重新创建。——-很遗憾的告诉你，你之前传递的参数都不见了，因为recreate你的Fragment的时候，调用的是默认构造函数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">FragmentActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> FragmentManager manager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        manager = getSupportFragmentManager();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 这里为什么要进行空判断，因为在屏幕旋转的时候，系统会执行onSaveInstanceState</span></span><br><span class="line"><span class="comment">         * 方法去保存当前activity的状态，然后activity会重建，执行onCreate方法，如果我们不判断</span></span><br><span class="line"><span class="comment">         * savedInstanceState是否为空，那么每次就会执行下面的commit操作，向Fragmnet传递参数，</span></span><br><span class="line"><span class="comment">         * 这样参数的却会保留下来，但是我们不应该每次都去传递参数。当进行了空判断时，当Activity重建</span></span><br><span class="line"><span class="comment">         * 的时候，会调用Fragment的默认构造函数，所以我们传递过去的参数不能保留了。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span>(savedInstanceState == <span class="keyword">null</span>)&#123;</span><br><span class="line">            manager.beginTransaction().replace(R.id.fl_main, <span class="keyword">new</span> FragmentOne(<span class="string">"params"</span>)).commit();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"=========savedInstanceState "</span>);</span><br><span class="line">        <span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FragmentOne</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView textView;</span><br><span class="line">    <span class="keyword">private</span> String params = <span class="string">"default"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FragmentOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"===========default constructor"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过构造方法接收传递过来的参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FragmentOne</span><span class="params">(String content)</span></span>&#123;</span><br><span class="line">        params = content;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span></span><br><span class="line"><span class="function"><span class="params">            Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        View view = inflater.inflate(R.layout.fragment1, container,<span class="keyword">false</span>);</span><br><span class="line">        textView = (TextView) view.findViewById(R.id.textview);</span><br><span class="line">        textView.setText(params);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>尽管这些代码看起来很合乎情理，可是在这里似乎并不能起作用。所以fragment之间传递数据有一套独特的机制。<br>即argument</p>
<p>一般做法是在需要接收数据的fragment声明一个静态方法，比如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//传递数据给DatePickerFragment</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String ARG_DATE=<span class="string">"date"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DatePickerFragment <span class="title">newInstance</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">        Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">        args.putSerializable(ARG_DATE, date);</span><br><span class="line">        DatePickerFragment fragment = <span class="keyword">new</span> DatePickerFragment();</span><br><span class="line">        fragment.setArguments(args);</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>在此方法中new一个fragment对象，并让这个对象调用setArguments(Bundle args)方法。</p>
<p>当想要往这个fragment发送数据时，只需要调用DatePickerFragment.newInstance(Date date)方法就可以。</p>
<p>首先要说明的是<strong>setArguments(Bundle args)</strong>函数。</p>
<p>参数为Bundle类型，Bundle主要用于传递数据，以键值对的形式保存数据。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">args.putSerializable(ARG_DATE, date);</span><br></pre></td></tr></table></figure></p>
<p>那这个fragment接收到的数据怎么取出来呢，当然有非常简单的办法，只需在<strong>onCreate</strong>方法中调用getArgument().getSerializable(String)。<strong>不要忘记强制转换一下</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//处理传进来的数据</span></span><br><span class="line">Date mDate=(Date)getArguments().getSerializable(ARG_DATE);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2017-12-08T12:39:26.934Z"><a href="/2017/12/08/endian/">2017-12-08</a></time>
        
  
    <h1 class="title"><a href="/2017/12/08/endian/">c语言判断机器大小端</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#第一种方法"><span class="toc-text"><a href="#&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;" class="headerlink" title="&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;"></a>&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第二种方法"><span class="toc-text"><a href="#&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6CD5;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6CD5;"></a>&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6CD5;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关于union"><span class="toc-text"><a href="#&#x5173;&#x4E8E;union" class="headerlink" title="&#x5173;&#x4E8E;union"></a>&#x5173;&#x4E8E;union</span></a></li></ol>
    </div>

        <h2 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> data1=<span class="number">0x12345678</span>;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%x----&gt;%p\n"</span>,*((<span class="keyword">char</span>*)&amp;data1+i),(<span class="keyword">char</span> *)&amp;data1+i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/Sundayssh/Sundayssh.github.io/blob/master/img/resultc.png?raw=true" alt=""></p>
<p>根据地址大小判断为小端模式</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*((<span class="keyword">char</span>*)&amp;data1+i)</span><br></pre></td></tr></table></figure>
<ol>
<li>&amp;data1 就是取data1的内存地址，即一个指向4个字节的int指针</li>
<li>（char*)&amp;data1: 将该指针转化为一个指向1个字节的指针</li>
<li><ul>
<li><em>(char </em> <em>)&amp;data1：取该指针(char</em>)的值，其实换句话说是取一个字节的内存数据。</li>
</ul>
</li>
</ol>
<h2 id="第二种方法"><a href="#第二种方法" class="headerlink" title="第二种方法"></a>第二种方法</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;  </span></span></span><br><span class="line"><span class="keyword">union</span> var&#123;  </span><br><span class="line">        <span class="keyword">char</span> c[<span class="number">4</span>];  </span><br><span class="line">        <span class="keyword">int</span> i;  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">union</span> var data;  </span><br><span class="line">        data.c[<span class="number">0</span>] = <span class="number">0x04</span>;<span class="comment">//因为是char类型，数字不要太大，算算ascii的范围~  </span></span><br><span class="line">        data.c[<span class="number">1</span>] = <span class="number">0x03</span>;<span class="comment">//写成16进制为了方便直接打印内存中的值对比  </span></span><br><span class="line">        data.c[<span class="number">2</span>] = <span class="number">0x02</span>;  </span><br><span class="line">        data.c[<span class="number">3</span>] = <span class="number">0x11</span>;  </span><br><span class="line"><span class="comment">//数组中下标低的，地址也低，按地址从低到高，内存内容依次为：04,03,02,11。总共四字节！  </span></span><br><span class="line"><span class="comment">//而把四个字节作为一个整体（不分类型，直接打印十六进制），应该从内存高地址到低地址看，0x11020304，低位04放在低地址上。  </span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%x\n"</span>,data.i);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果<br><br>11020304<br><br>证明我的机器是小端模式</p>
<h2 id="关于union"><a href="#关于union" class="headerlink" title="关于union"></a>关于union</h2><p>中文翻译为“联合体，共用体”<br><br>例子<br><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;  </span></span></span><br><span class="line"><span class="keyword">union</span> var&#123;  </span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">int</span> l;  </span><br><span class="line">        <span class="keyword">int</span> i;  </span><br><span class="line">&#125;;  </span><br><span class="line">main()&#123;  </span><br><span class="line">        <span class="keyword">union</span> var v;  </span><br><span class="line">        v.l = <span class="number">5</span>;  </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"v.l is %d\n"</span>,v.i);  </span><br><span class="line">        v.i = <span class="number">6</span>;  </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"now v.l is %ld! the address is %p\n"</span>,v.l,&amp;v.l);  </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"now v.i is %d! the address is %p\n"</span>,v.i,&amp;v.i);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>l与i完全就是共用一个内存首地址<br><br>结果：<br>v.l is 5<br>now v.l is 6! the address is 0xbfad1e2c<br>now v.i is 6! the address is 0xbfad1e2c  </p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>
 
<nav id="pagination">
  
    <a href="/page/2/" class="alignleft prev">上一页</a>
  
  
    <a href="/page/4/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
      <aside id="sidebar" class="alignright">
        
           

        
          <div class="widget tag">
  <h3 class="title">微信公众账号</h3>
    <ul class="entry">
      <img src="/img/default/qrcode.jpg" alt="欢迎关注个人公众账号" style= "width: 100%">
    </ul>
</div>
        
          <div class="widget tag">
  <h3 class="title">日历云</h3>
  <div id="calendar"></div>
</div>

        
          
  <div class="widget tag">
    <h3 class="title">友情链接</h3>
      <ul class="entry">
        
          <li class='link'><a href='http://xiaoyun.farbox.com'>晓晓博客</a></li>
        
          <li class='link'><a href='http://www.ituring.com.cn/users/136808'>图灵社区</a></li>
        
      </ul>
  </div>


        
          
  <div class="widget tag">
    <h3 class="title">归档</h3>
	<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">公元 2018 年</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">公元 2017 年</a><span class="archive-list-count">11</span></li></ul>
  </div>

        
      </aside>
      <div class="clearfix"></div>
    </div>
  <footer id="footer"><div class="footer-content inner">
  <div class="alignleft">
  
    &copy; 2018 Sunday
    
  </div>
  <div class="alignright">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme
    <a href="https://github.com/pengloo53/Hexo-theme-light_cn">light_cn</a>
  </div>

  <div>
    Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a>
  </div>
  
  <div class="clearfix"></div>
</div></footer>
  <script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<!-- calendar widget -->

  <script src="/js/calendar.js"></script>
  <script src="/js/languages.js"></script>
  <script type="text/javascript">
    $(function() {
    
      $('#calendar').aCalendar('zh-CN',{single:, root:'calendar'});
    
    });
  </script>


<!-- 百度统计 -->

	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?9acf0cedd48dc53be256ede5a98c2aaa";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<!-- fancybox -->

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>